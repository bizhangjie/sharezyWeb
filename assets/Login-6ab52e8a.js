import{d as S,s as C,u as U,C as j,S as q,r as B,a as t,o as L,b as N,f as a,w as o,e as p,j as _,h as R,y as c,_ as V}from"./index-c17d8447.js";const I={class:"login-page"},A={class:"login-header"},D=S({__name:"Login",setup(E){const d=C(),i=U(),m=j(),f=q(),e=B({username:"",password:"",agree:!1}),g=async h=>{if(e.value.agree)try{const s=await R.post("/auth/login",{username:e.value.username,password:e.value.password}),n=s.data.data.token;n&&localStorage.setItem("jwt_token",n),m.updateUserData(s.data.data.user),f.login(),c.success("ç™»å½•æˆåŠŸğŸ¥³");const u=i.query.redirect||"/";d.push(u)}catch{c.error("è¯·è¾“å…¥æœ‰æ•ˆçš„ç”¨æˆ·åå’Œå¯†ç ")}else c.error("è¯·åŒæ„ä½¿ç”¨è¯¥ç½‘ç«™çš„è§„åˆ™")},v=()=>{d.push("/register")};return(h,s)=>{const n=t("a-page-header"),u=t("a-input"),l=t("a-form-item"),w=t("a-input-password"),b=t("a-checkbox"),k=t("a-button"),y=t("a-form"),x=t("a-card");return L(),N("div",I,[a(x,{class:"login-card"},{default:o(()=>[p("div",A,[a(n,{"back-icon":!1,title:"ç”¨æˆ·ç™»å½•"})]),a(y,{model:e.value,name:"basic","label-col":{span:6},"wrapper-col":{span:18},onFinish:g},{default:o(()=>[a(l,{label:"ç”¨æˆ·å",name:"username",rules:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å"}]},{default:o(()=>[a(u,{value:e.value.username,"onUpdate:value":s[0]||(s[0]=r=>e.value.username=r)},null,8,["value"])]),_:1}),a(l,{label:"å¯†ç ",name:"password",rules:[{required:!0,message:"è¯·è¾“å…¥å¯†ç "}]},{default:o(()=>[a(w,{value:e.value.password,"onUpdate:value":s[1]||(s[1]=r=>e.value.password=r)},null,8,["value"])]),_:1}),a(l,{"wrapper-col":{offset:6,span:18}},{default:o(()=>[a(b,{checked:e.value.agree,"onUpdate:checked":s[2]||(s[2]=r=>e.value.agree=r)},{default:o(()=>[_("æˆ‘åŒæ„ä½¿ç”¨è¯¥ç½‘ç«™çš„è§„åˆ™")]),_:1},8,["checked"])]),_:1}),a(l,{"wrapper-col":{offset:6,span:18}},{default:o(()=>[a(k,{type:"primary",disabled:!e.value.agree,"html-type":"submit"},{default:o(()=>[_("ç™»å½•")]),_:1},8,["disabled"]),p("a",{class:"register-link",onClick:v},"æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»æ³¨å†Œ")]),_:1})]),_:1},8,["model"])]),_:1})])}}});const P=V(D,[["__scopeId","data-v-9a8f92ec"]]);export{P as default};
