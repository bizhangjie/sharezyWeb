import{_ as $,a as s,o as m,i as P,w as a,f as t,j as z,u as D,r as i,k as E,b as I,l as S,F as T,h as j,e as d,p as A,m as F}from"./index-c17d8447.js";const W={props:{code:Number,text:String},methods:{goBack(){window.history.back()}}};function H(u,g,p,k,l,w){const y=s("a-button"),x=s("a-result");return m(),P(x,{status:p.code,title:p.code,"sub-title":p.text},{extra:a(()=>[t(y,{type:"primary",onClick:w.goBack},{default:a(()=>[z("返回上一级")]),_:1},8,["onClick"])]),_:1},8,["status","title","sub-title"])}const L=$(W,[["render",H],["__scopeId","data-v-e1bcceae"]]);const M=u=>(A("data-v-5d103f03"),u=u(),F(),u),O={key:1,class:"blog-container"},R={class:"left-section"},G={class:"sticky-anchor"},J={class:"middle-section"},K={class:"article-content"},Q={class:"right-section"},U=M(()=>d("h3",null,"手机查看文章",-1)),X={__name:"BlogDetailPage",setup(u){const g=D(),p=(r,f)=>{console.log(f);const n=f.href,o=document.getElementById(n);o&&o.scrollIntoView({behavior:"smooth",top:20})},k=i(""),l=i([]),w=i(100),y=g.fullPath,x=i(y),V=i("https://www.antdv.com/assets/logo.1ef800a8.svg"),b=i(!1),q=async()=>{try{const r=g.params.id;let n=(await j.get(`/article/i/${r}`)).data.data.content,o=0;const h=n.split(`
`).filter(c=>c.trim()!==""&&c.startsWith("#")),e=[{level:0,node:{children:l.value}}];for(let c=0;c<h.length;c++){const _=h[c];if(_.startsWith("#")){const v=_.split(" ")[0].length,B=_.replace(/^(#+\s+)/,"");o++;const N=B.toLowerCase().replace(/\s+/g,"-"),C={key:`${o}`,href:`#${N}`,title:B,level:v,children:[]};for(;e.length>0&&e[e.length-1].level>=v;)e.pop();e.length>0?((e[e.length-1].node||{children:[]}).children.push(C),n=n.replace(_,`${_}  <a id="#${N}"></a>`)):l.value.push(C),e.push({level:v,node:C})}}k.value=n,console.log(l),console.log(typeof l),console.log(Object.values(l))}catch(r){r.response&&r.response.status==404&&(console.log("40404040404"),b.value=!0),console.error("获取文章内容出错：",r)}};return E(()=>{q()}),(r,f)=>{const n=s("a-anchor"),o=s("a-col"),h=s("v-md-preview"),e=s("a-card"),c=s("a-back-top"),_=s("a-qrcode"),v=s("a-row");return m(),I(T,null,[b.value?(m(),P(L,{key:0,code:"404",text:"抱歉未找到相关文章！"})):S("",!0),b.value?S("",!0):(m(),I("div",O,[t(v,null,{default:a(()=>[t(o,{span:4},{default:a(()=>[d("div",R,[d("div",G,[t(n,{affix:!1,items:l.value,onClick:p},null,8,["items"])])])]),_:1}),t(o,{span:17},{default:a(()=>[d("div",J,[t(e,null,{default:a(()=>[d("div",K,[t(h,{text:k.value,ref:"preview"},null,8,["text"])])]),_:1}),t(c)])]),_:1}),t(o,{span:3},{default:a(()=>[d("div",Q,[t(e,null,{default:a(()=>[U,t(_,{"error-level":"H",size:w.value,"icon-size":10,value:x.value,icon:V.value},null,8,["size","value","icon"])]),_:1})])]),_:1})]),_:1})]))],64)}}},ee=$(X,[["__scopeId","data-v-5d103f03"]]);export{ee as default};
